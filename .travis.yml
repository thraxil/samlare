language: go
go: 1.8
sudo: false
dist: trusty
before_install:
- go get github.com/mattn/goveralls
install:
- go get github.com/BurntSushi/toml
- go get github.com/go-kit/kit/log
script:
- goveralls -service=travis-ci -package=.
env:
  global:
  - VERSION=$(cat VERSION)
before_deploy:
- mkdir -p release
- GOOS=linux  GOARCH=amd64 go build -o release/samlare-v$VERSION-linux-amd64
- GOOS=darwin  GOARCH=amd64 go build -o release/samlare-v$VERSION-darwin-amd64
deploy:
  provider: releases
  file:
  - release/samlare-v$VERSION-linux-amd64
  - release/samlare-v$VERSION-darwin-amd64
  skip_cleanup: true
  on:
    tags: true
  api_key:
    secure: CzFgvwk/UNyNSzMudN+XGcdPb/ZQ/2LWIAwgZi4wr0xF8z8N0Tj1B1a4eIixQzCVaezcMZR8GQG5HoUZapOyWNCKx9wjV9jf/T2VvU2r8GcdVDp4el2oK+uXAVe+RTsI6XS16pAbB6985ab9zyb8efnkbYBYgsTFf8F9f2YA12XniQvaCTP/+NbP14O5irFOm+BwrbVt/G6Zi4k9PwPQO0Bkq6qKwBrHE+cgzgWDBSVYDX2761IOX/MMU5rimsU2uIxaWDvWpb4W6pxarGqW7KR/bvSdB9yyjM+ggIPKSH8P8aN/va4dA/d9NpuZdYRCSud1pyymlYrCuIVa4zNkUPzpMmYFsleyR9rNtLiIA+5bjPxr/Uj641Vto4dR75mg8AvqGI2QHd/by7BJ17C0zSq6a+aJgU3q/3DPYdnjCtvEabDQE6Zj5xRByhrhArGItIVdgyNkRisBuUos+fUE7FoPpKRGvdsIGqH4a2qz17iaAEr/C3UMyaS80YQAYIU2yYwkrMVVWjVLHbXUSFbn0VdKWdKoojTiacqvJyHU5LfjB/xLh0iMNNEAio1qZjev+J7VQTg3j6/zcfspc0O+fuW/T3QHrgAnN9sAqvfFvSxwR+m5uL5Eg99OFzuZZC4kBGGjyFwLCSoquR5PJCgIrrs/EsOpm/5+pUzCiic+hCs=
